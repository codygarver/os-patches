From 4e3a2e1bd5214006e4b0e65616747255dc7d8966 Mon Sep 17 00:00:00 2001
From: Rui Matos <tiagomatos@gmail.com>
Date: Wed, 12 Dec 2012 10:17:02 +0000
Subject: region: Update for the input source switching keybindings move

These are now provided by gsettings-desktop-schemas.

https://bugzilla.gnome.org/show_bug.cgi?id=690105
---
Index: gnome-control-center-3.6.3/configure.ac
===================================================================
--- gnome-control-center-3.6.3.orig/configure.ac	2014-02-26 19:04:31.143683870 +0100
+++ gnome-control-center-3.6.3/configure.ac	2014-02-26 19:04:31.135683870 +0100
@@ -112,7 +112,7 @@
 NETWORK_MANAGER_REQUIRED_VERSION=0.8.992
 LIBNOTIFY_REQUIRED_VERSION=0.7.3
 GNOME_DESKTOP_REQUIRED_VERSION=3.5.91
-SCHEMAS_REQUIRED_VERSION=3.5.91
+SCHEMAS_REQUIRED_VERSION=3.7.2.2
 LIBWACOM_REQUIRED_VERSION=0.6
 CLUTTER_REQUIRED_VERSION=1.11.3
 GOA_REQUIRED_VERSION=3.5.90
Index: gnome-control-center-3.6.3/panels/region/gnome-region-panel-input.c
===================================================================
--- gnome-control-center-3.6.3.orig/panels/region/gnome-region-panel-input.c	2014-02-26 19:04:31.143683870 +0100
+++ gnome-control-center-3.6.3/panels/region/gnome-region-panel-input.c	2014-02-26 19:04:32.000000000 +0100
@@ -1219,19 +1219,19 @@
 static void
 update_shortcuts (GtkBuilder *builder)
 {
-  char *previous, *next;
+  char **previous, **next;
   GSettings *settings;
 
-  settings = g_settings_new ("org.gnome.settings-daemon.plugins.media-keys");
+  settings = g_settings_new ("org.gnome.desktop.wm.keybindings");
 
-  previous = g_settings_get_string (settings, "switch-input-source-backward");
-  next = g_settings_get_string (settings, "switch-input-source");
+  previous = g_settings_get_strv (settings, "switch-input-source-backward");
+  next = g_settings_get_strv (settings, "switch-input-source");
 
-  update_shortcut_label (WID ("prev-source-shortcut-label"), previous);
-  update_shortcut_label (WID ("next-source-shortcut-label"), next);
+  update_shortcut_label (WID ("prev-source-shortcut-label"), previous[0]);
+  update_shortcut_label (WID ("next-source-shortcut-label"), next[0]);
 
-  g_free (previous);
-  g_free (next);
+  g_strfreev (previous);
+  g_strfreev (next);
 }
 
 static gboolean
